<!DOCTYPE html>
<html lang="en">
	<head>

		<title>HTML5 video tag test</title>
		
		<meta name="title" content="HTML5 video tag test">
		<meta name="description" content="Test use of the HTML5 video tag for DVX description of video">
		<meta name="keywords" content="HTML5, video description, extended description, media, accessibility">

    <script type="text/javascript">
        // listener function changes src
        function myNewSrc() {
            var myVideo = document.getElementsByTagName('video')[0];
            myVideo.src = "https://www.dropbox.com/s/jv2zmrz2pn1m54g/The_Matrix.ogv";
            myVideo.load();
            myVideo.play();
        }
		function myPlayPause() {
			var myVideo = document.querySelectorAll('video')[0];
			var mediaController = myVideo.controller;
			if (mediaController.paused)
                mediaController.play();
            else
                mediaController.pause();	
		}
        function getPercentProg() {
            var myVideo = document.getElementsByTagName('video')[0];
            var endBuf = myVideo.buffered.end(0);
            var soFar = parseInt(((endBuf / myVideo.duration) * 100));
            document.getElementById("loadStatus").innerHTML =  soFar + '%';
        }
       function myAutoPlay() {
			//var myVideo = document.getElementsByTagName('video')[0];
			//var mediaController = myVideo.controller;
			//mediaController.play();
			
			//var myVideos = document.getElementsByTagName('video');
			//var mediaController = new MediaController();

			//for (i=0; i< myVideos.length; i++) {
			//	myVideos[i].controller = mediaController;
			//}

			//mediaController.play()
       }
       // add a listener function to the ended event
        function myAddListener(){

			var myVideo = document.getElementsByTagName('video')[0];
			myVideo.addEventListener('progress', getPercentProg, false);
			myVideo.addEventListener('canplay', myAutoPlay, false);
 		
		
			//var myVideos = document.querySelectorAll('video');
			//var mediaController = new MediaController();
			//myVideos[0].controller = mediaController;
			//myVideos[1].controller = mediaController;
			//mediaController.load();
			//mediaController.play();

			//var myVideo = document.getElementsByTagName('video')[0];
            //myVideo.addEventListener('ended', myNewSrc, false);
        }
    </script>

	</head>
	
	<body onload="myAddListener()">

		<video id="WearaBraille" mediagroup="myTest">

			<source src="https://dl.dropbox.com/u/5295617/HTML5%20video/WearaBraille_edited_by_Apple_.webm" type="video/webm">
			<source src="https://dl.dropbox.com/u/5295617/HTML5%20video/WearaBraille_edited_by_Apple_.ogv" type="video/ogg">
			Your browser does not support the video tag.
		</video>

		<video id="Matrix" mediagroup="myTest">

			<source src="https://dl.dropbox.com/u/5295617/HTML5%20video/The_Matrix.webm" type="video/webm">
			<source src="https://dl.dropbox.com/u/5295617/HTML5%20video/The_Matrix.ogv" type="video/ogg">

			Your browser does not support the video tag.
		</video>

        <div class="video-player-controls" align="center">
			<p id="loadStatus">MOVIE LOADING...</p>
			<!-- Note: this button is accessible using "Alt-1" -->
			<input type="button" onclick="myPlayPause()" accesskey="1" value="Play/Pause">
		</div>
		
<!--
 		<audio id="a1" mediagroup="WearaBraille">
			<source src="https://dl.dropbox.com/u/5295617/411.ogg" type=”audio/ogg”>
			<source src=“https://dl.dropbox.com/u/5295617/411.mp3” type=”audio/mp3”>
		</audio>
 -->
 	</body>
	
</html>
